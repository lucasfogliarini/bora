<p *ngIf="!events"><em>Carregando ...</em></p>
<table class="table table-striped" *ngIf="events">
    <tbody>
        <tr class="{{isSelectedClass(event)}}" (click)="selectEvent(event)" role="button" *ngFor="let event of events">
          <td class="event-details">
            <div class="row">
              <div *ngIf="event.attachments" class="background-image">
                <img class="col-12" [src]="getBackGroundImage(event)" />
              </div>
              <div class="title col-12">{{ event.title?.substring(0, 100) }}</div>
              <br />
              <iframe *ngIf="event.spotifyUrl"
                    class="spotify"
                      style="border-radius:12px"
                      [src]="getSpotifyEmbedUrl(event)"
                      width="100%"
                      height="80"
                      allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture">
              </iframe>
            </div>
            <div class="row mt-3">
              <div class="date-time col-4">
                <div class="date">{{ event.start | date: 'dd/MM/yy' }}</div>
                <span style="font-size: small;" >{{ event.start | date: 'HH:mm' }}</span>
              </div>
              <div class="event-buttons col-8 row float-right">
                <fa-icon [icon]="['fas', 'people-line']" mwlConfirmationPopover
                  title="Convidados. Bora?"
                  popoverTitle="Convidados. Bora?"
                  popoverMessage="{{attendees(event.attendees)}}"
                  placement="right"
                  confirmText="Bora!"
                  (confirm)="participate(event.id)"
                  role="button"
                  [isOpen]="isSelected(event)"
                  class="col-3">
                </fa-icon>
                <fa-icon [icon]="['fab', 'whatsapp']" mwlConfirmationPopover
                  title="WhatsApp"
                  popoverTitle="WhatsApp"
                  popoverMessage="Compartilhar <b>{{event.title}}</b> no WhatsApp?"
                  placement="top"
                  confirmText="Compartilhar"
                  (confirm)="share(event)"
                  role="button"
                  class="col-3 float-right">
                </fa-icon>
                <fa-icon [icon]="['fas', 'ticket']" mwlConfirmationPopover
                  [hidden]="!event.ticketUrl"
                  title="Ingresso"
                  popoverTitle="Ingresso"
                  popoverMessage="{{event.ticketUrl}}"
                  placement="top"
                  confirmText="Abrir Link"
                  (confirm)="openUrl(event.ticketUrl)"
                  role="button"
                  class="col-3 float-right">
                </fa-icon>
                <fa-icon [icon]="['fas', 'map-location-dot']" mwlConfirmationPopover
                    title="LocalizaÃ§Ã£o"
                    popoverTitle="Abrir no Google Maps?"
                    placement="left "
                    confirmText="Abrir"
                    popoverMessage="{{ event.location?.substring(0,100) }}"
                    (confirm)="openMaps(event.location)"
                    role="button"
                    class="col-3 float-right">
                </fa-icon>
              </div>
            </div>
          </td>
        </tr>
    </tbody>
</table>
